# Curated feature set for tool-augmented multi-agent experiment
# Based on actual finance-agent PRD and Roadmap
#
# Categories: api_endpoint, config_change, refactor, test, new_module
# Complexity: low, medium, high
# Priority: from PRD (P0/P1/P2)

features:
  # ── finance-agent ──────────────────────────────────────────
  # Priority P0: Core benchmark features

  - id: fin-01
    project: finance-agent
    category: api_endpoint
    expected_complexity: medium
    priority: P0
    prd_ref: P0-US1 to P0-US6
    description: >-
      Add a CLI flag --output-format to support multiple output formats (JSON, CSV, markdown table)
      in addition to the default JSON output. Include summary statistics in all formats.

  - id: fin-02
    project: finance-agent
    category: config_change
    expected_complexity: low
    priority: P0
    prd_ref: P0-US10
    description: >-
      Add configurable timeout settings: per-question timeout (default 120s) and per-turn timeout.
      These should be configurable via CLI flags --question-timeout and --turn-timeout.

  - id: fin-03
    project: finance-agent
    category: test
    expected_complexity: medium
    priority: P0
    prd_ref: P0-US7 to P0-US10
    description: >-
      Add integration tests for the evaluation harness covering: accuracy calculation,
      per-type breakdown, cost tracking, latency metrics, and failure categorization.

  # Priority P1: Should Have features

  - id: fin-04
    project: finance-agent
    category: new_module
    expected_complexity: high
    priority: P1
    prd_ref: P1-US7 to P1-US8
    description: >-
      Add multi-model batch evaluation capability: accept a --models flag with comma-separated
      model names, run evaluation for each model on the same dataset, output combined results
      with side-by-side comparison table showing accuracy, cost, latency per model.

  - id: fin-05
    project: finance-agent
    category: config_change
    expected_complexity: low
    priority: P1
    prd_ref: P1-US4 to P1-US6
    description: >-
      Add --parallel flag to control concurrent question evaluation (1-10). Currently
      supports parallel evaluation but needs better configuration and tool call success rate tracking.

  # Priority P2: Could Have features

  - id: fin-06
    project: finance-agent
    category: new_module
    expected_complexity: high
    priority: P2
    prd_ref: P2-US1 to P2-US2
    description: >-
      Create a web UI module for browsing benchmark results. Should include: accuracy
      rankings table, filter by question type/model/date, and basic search.

  - id: fin-07
    project: finance-agent
    category: refactor
    expected_complexity: medium
    priority: P2
    prd_ref: P2-US3 to P2-US5
    description: >-
      Add new financial tools: PDF Parser for 10-K/10-Q PDFs, Financial Calculator for
      CAGR/ROE/ROIC/WACC calculations, and FRED API integration for macroeconomic data.

  - id: fin-08
    project: finance-agent
    category: new_module
    expected_complexity: high
    priority: P2
    prd_ref: P2-US6 to P2-US7
    description: >-
      Implement caching layer for SEC filings and web content. Add support for
      user-provided custom datasets in JSON format.

  # ── live-set-revival ───────────────────────────────────────
  # TODO: Update based on actual live-set-revival PRD

  - id: lsr-01
    project: live-set-revival
    category: api_endpoint
    expected_complexity: medium
    description: >-
      Add a POST /api/setlists/import endpoint that accepts a JSON setlist
      and creates songs, cues, and transitions in the correct order.

  - id: lsr-02
    project: live-set-revival
    category: config_change
    expected_complexity: low
    description: >-
      Add a user-configurable default BPM and time signature that apply
      when creating new songs without explicit tempo information.

  - id: lsr-03
    project: live-set-revival
    category: refactor
    expected_complexity: high
    description: >-
      Refactor the audio routing logic to decouple channel assignment from
      song loading, allowing channels to be pre-configured independently.

  - id: lsr-04
    project: live-set-revival
    category: test
    expected_complexity: medium
    description: >-
      Add unit tests for the MIDI mapping engine covering velocity curves,
      CC message routing, and program change handling.

  - id: lsr-05
    project: live-set-revival
    category: new_module
    expected_complexity: high
    description: >-
      Create a rehearsal-mode module that logs timing deviations from the
      click track and generates a per-song accuracy report.

  # ── agent-team ─────────────────────────────────────────────

  - id: at-01
    project: agent-team
    category: api_endpoint
    expected_complexity: medium
    description: >-
      Add a /api/runs/status endpoint that returns current orchestrator
      state, active phase, elapsed time, and recent log entries.

  - id: at-02
    project: agent-team
    category: config_change
    expected_complexity: low
    description: >-
      Add configurable retry backoff settings for Claude API calls with
      initial delay, multiplier, and max retries parameters.

  - id: at-03
    project: agent-team
    category: refactor
    expected_complexity: high
    description: >-
      Extract the Mattermost message formatting logic from orchestrator.py
      into a dedicated MessageFormatter class with unit-testable methods.

  - id: at-04
    project: agent-team
    category: test
    expected_complexity: medium
    description: >-
      Add tests for the state persistence layer covering save, load, resume,
      and corruption-recovery scenarios.

  - id: at-05
    project: agent-team
    category: new_module
    expected_complexity: high
    description: >-
      Create a metrics-collection module that tracks per-phase duration,
      token usage, and tool-call counts, exporting to a JSONL log.
